网盘靠不住？是时候给自己搭一个私有云盘了
<img src="http://p9.pstatp.com/large/321d00040adeb58db8a3" img_width="1280" img_height="308" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">员工们都知道，这两年云盘被封的封，被查的查，几乎没剩几个了。。而且还隔三差五的爆出各种云盘泄露隐私的新闻。<img src="http://p3.pstatp.com/large/321600040b6104d91311" img_width="593" img_height="270" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">泄露隐私就算了，反正贾维斯也不会把隐私信息传到云盘，没什么可以泄露的。。很多时候资料存在云盘，一不小心就变成了 8 秒教育篇。。。<img src="http://p1.pstatp.com/large/321e00039ff04b54bb9b" img_width="640" img_height="380" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">买个硬盘吧，安全是安全，但不能做到随用随看，带着很不方便。贾维斯那 100 个 G 的学习资料实在是无处安放啊。。<strong>所以今天，贾维斯就教员工们自己动手做一个专属于你自己的私密云盘。。</strong><strong> 几种搭建方法 </strong>对于个人用户来说，主要有下面几种方法：<strong>1、NAS + 机械硬盘</strong>优点：省事方便，有的厂商有拓展应用，功能强大，例：群晖（Synology）缺点：价格偏高<strong>2、路由器自带存储空间</strong>优点：自带 NAS 功能，里面也自带一些方便的应用，点击就能安装，例：小米路由器Pro缺点：价格偏高<strong>3、树莓派+机械硬盘</strong>优点：造价低，跟着教程做就能成功缺点：需要懂点技术，稍微麻烦如果你是土豪你有钱，那就不要问贾维斯了，今天我们主要介绍的就是成本最低的第三种方法：<strong>树莓派 + 机械硬盘。</strong><img src="http://p3.pstatp.com/large/322700006701357f1ff8" img_width="640" img_height="143" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">树莓派 1 个机械硬盘 1 个<strong> 最终实现的效果 </strong><strong>1、局域网内的多个设备能够方便的互传文件；</strong><strong>2、能快速上传和下载私有云里的文件；</strong><strong>3、能够在任何有网络的地方安全的上传下载私有云里的文件；</strong><strong>4、私有云里的文件可以直接分享给其他人；</strong><strong>5、新功能不断完善……比如，一回到家就会自动将你的照片文件备份到私有云；在外面丢一个下载链接到云上，回到家的时候，文件已经下载到私有云了……</strong><strong> 搭建私有云教程（一） </strong><strong>第一步：</strong>为树莓派连上路由器，并获取树莓派 IP 地址。最简单的方法是打开路由器后台，就可以看到树莓派的 IP 地址了。<img src="http://p3.pstatp.com/large/32270000670277c63657" img_width="640" img_height="374" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0"><strong>第二步：</strong>打开电脑，下载并安装软件“PuTTY”（后台回复<strong> “PuTTY”</strong> 可以获取下载链接）将树莓派 IP 地址输入到下方的红框内，最后点击 OPEN 按钮。（PuTTY设置页面）<img src="http://p3.pstatp.com/large/321d00040adc31607048" img_width="466" img_height="449" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">设置成功后会出现下面的页面。<img src="http://p3.pstatp.com/large/321600040b6205d66ee4" img_width="640" img_height="403" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">（登陆时的默认账号：pi，密码：raspberry）接下来的所有操作都是在上面这个页面里面操作，主要是写一些代码。<strong>为了方便员工们操作，贾维斯把代码引用出来了，员工们直接复制黏贴到上面的黑框就可以了。</strong><strong>一、更新树莓派系统 </strong>sudo apt-get updatesudo apt-get upgrade如果有出现这种403或者404的字样，需要重新执行一遍代码（如果一直有错误，可以试试多执行几次）（图1）<img src="http://p3.pstatp.com/large/321600040b63076b3dd0" img_width="640" img_height="223" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">（图2）<img src="http://p3.pstatp.com/large/321600040b64419a3e4e" img_width="370" img_height="183" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0"><strong>二、安装LAMP套件 </strong><strong>1、安装apache2</strong>sudo apt-get install apache2<strong>2、安装MySQL</strong>sudo apt-get install mysql-server安装以后会让你设置一个 MySQL的密码，要记着，后面有用。<img src="http://p3.pstatp.com/large/321e00039ff25f521f87" img_width="640" img_height="262" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">确认密码<img src="http://p1.pstatp.com/large/321e00039ff3f75fb43f" img_width="640" img_height="328" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0"><strong>3、安装php和依赖</strong>sudo apt-get install php5 php5-gd php-xml-parser php5-intl php5-sqlite php5-mysql smbclient curl libcurl3 php5-curl<strong>4、安装phpmyadmin</strong>sudo apt-get install phpmyadmin根据提示输入设置的 MySQL 用户名和密码，选择 MySQL，就可以自动配置好phpmyadmin。这里我直接按了回车，选了第一个。<img src="http://p1.pstatp.com/large/321d00040adf4d37ca5c" img_width="640" img_height="247" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">回车键<img src="http://p1.pstatp.com/large/321e00039ff8571dc681" img_width="640" img_height="333" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">数据库账号的密码<img src="http://p1.pstatp.com/large/321e00039ff553e21338" img_width="640" img_height="225" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">确认密码<img src="http://p3.pstatp.com/large/321d00040ae0e88d0e3f" img_width="574" img_height="346" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0"><strong>5、从 https://owncloud.org/install/ 下载最新的ownCloud Server，并解压到web根目录（/var/www/html）</strong>sudo wget https://download.owncloud.org/community/owncloud-10.0.2.zip<strong>PS：10.0.2是最新的版本号，具体最新的是什么，可以去（https://owncloud.org/install/#edition），看下面这个地方：</strong><img src="http://p3.pstatp.com/large/3227000067051bb92eb0" img_width="640" img_height="274" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">如果在下载未完成的情况下中断SSH、断电等意外导致下载中断的话，可以使用下面这些语句来继续下载，不用从头开始。sudo wget -c https://download.owncloud.org/community/owncloud-10.0.2.zip<strong>解压下载的压缩包</strong>sudo unzip owncloud-10.0.2.zip -d /var/www/html/<strong>进入owncloud web目录</strong>cd /var/www/html/owncloud<strong>建立数据库目录</strong>sudo mkdir data<strong>6、修改目录权限</strong>OwnCloud在安装的过程中需要对一些目录有写的权限，所以，我们需要在在/owncloud 目录下运行以下命令：sudo chown -R www-data:www-data datasudo chown -R www-data:www-data configsudo chown -R www-data:www-data apps<strong>到这里，所有需要在树莓派上安装的东西就完成了，接下来只需要配置好数据库和ownCloud就可以使用了</strong><strong>三、配置MySQL（数据库）</strong><strong>1、登录数据库</strong>mysql -u root -p<strong>2、输入之前安装MySQL的时候设置的密码</strong>（出现下图这样的字样，就是登陆成功了）<img src="http://p9.pstatp.com/large/322700006706cf851892" img_width="640" img_height="240" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0"><strong>3、成功登陆后，在MySQL这个软件中建立一个数据库</strong>CREATE DATABASE 数据库名称（自定义）;例如：CREATE DATABASE owncloud;<strong>警告：代码最后的分号一定要有！！！</strong>出现这个提示应该就是可以了<strong>4、为刚才建立的数据库建立自己的账户</strong>GRANT ALL ON mysql数据库名称.* to 'mysql数据库用户名'@'localhost' IDENTIFIED BY 'mysql数据库密码';例如：GRANT ALL ON <strong>owncloud</strong>.* to '<strong>Jarvis</strong>'@'localhost' IDENTIFIED BY '<strong>23333333</strong>';<strong>5、执行下面命令分配权限</strong>FLUSH PRIVILEGES;<strong>6、到此MySQL就配置完毕，输入 exit 退出即可</strong><img src="http://p1.pstatp.com/large/3227000067083ef71d79" img_width="530" img_height="146" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">到这里，树莓派上需要弄的东西就都完成了！！！不过，还需要让树莓派重启才能使用，重启代码：sudo reboot<strong>PuTTY软件里所有的设置到此结束</strong>打开我们电脑浏览器，并在地址栏里输入树莓派IP地址/owncloud例如：192.168.31.202/owncloud就会看到这个画面<img src="http://p1.pstatp.com/large/3227000067071c99be29" img_width="640" img_height="408" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">填写完以后，按下回车就可以了<img src="http://p3.pstatp.com/large/321600040b6708afdc10" img_width="640" img_height="675" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0"><strong>PS：数据库用户名、密码和数据库名是我们在 PuTTY 中设置的</strong><img src="http://p3.pstatp.com/large/321e00039ff90972f459" img_width="539" img_height="219" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">设置完成之后就可以用我们设置的账户名和密码登录后台了。（后台跟很多云盘差不多）<img src="http://p3.pstatp.com/large/321600040b68336f6851" img_width="640" img_height="297" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">然后我们就可以将自己的文件上传到这个私有云，并且下载私有云平台的所有文件，速度都是快的飞起啊。。嗯，第一期就先教大家如何搭建一个私有云，不过这样搭建的私有云只能在局域网内使用，而且存储空间比较小，第二期会有扩展内容：<strong>1、利用机械硬盘扩展私有云空间；</strong>2、打破局域网的限制，在任何有网络的地方都可以上传下载。<strong>3、私有云平台内容分享</strong>立刻关注【差评】头条号，每天三分钟学些新知识，看到更大的世界！<img src="http://p1.pstatp.com/large/321e00038a442ddf5f68" img_width="640" img_height="320" alt="网盘靠不住？是时候给自己搭一个私有云盘了" inline="0">